{
  "version": "6",
  "dialect": "sqlite",
  "id": "db493601-478d-4433-bb50-ab4ad4ab5b64",
  "prevId": "e4d8f853-6764-430c-961f-3e13e927011f",
  "tables": {
    "audit_log": {
      "name": "audit_log",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "timestamp": {
          "name": "timestamp",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(unixepoch())"
        },
        "operation": {
          "name": "operation",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "entity_type": {
          "name": "entity_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "entity_id": {
          "name": "entity_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "ip_address": {
          "name": "ip_address",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'success'"
        },
        "details": {
          "name": "details",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "kms_operation_id": {
          "name": "kms_operation_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_audit_timestamp": {
          "name": "idx_audit_timestamp",
          "columns": [
            "timestamp"
          ],
          "isUnique": false
        },
        "idx_audit_entity": {
          "name": "idx_audit_entity",
          "columns": [
            "entity_type",
            "entity_id"
          ],
          "isUnique": false
        },
        "idx_audit_operation": {
          "name": "idx_audit_operation",
          "columns": [
            "operation"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "certificate_authorities": {
      "name": "certificate_authorities",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "subject_dn": {
          "name": "subject_dn",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "serial_number": {
          "name": "serial_number",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "key_algorithm": {
          "name": "key_algorithm",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "not_before": {
          "name": "not_before",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "not_after": {
          "name": "not_after",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "kms_key_id": {
          "name": "kms_key_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "kms_certificate_id": {
          "name": "kms_certificate_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "certificate_pem": {
          "name": "certificate_pem",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'active'"
        },
        "revocation_date": {
          "name": "revocation_date",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "revocation_reason": {
          "name": "revocation_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(unixepoch())"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(unixepoch())"
        }
      },
      "indexes": {
        "certificate_authorities_serial_number_unique": {
          "name": "certificate_authorities_serial_number_unique",
          "columns": [
            "serial_number"
          ],
          "isUnique": true
        },
        "idx_ca_serial": {
          "name": "idx_ca_serial",
          "columns": [
            "serial_number"
          ],
          "isUnique": false
        },
        "idx_ca_status": {
          "name": "idx_ca_status",
          "columns": [
            "status"
          ],
          "isUnique": false
        },
        "idx_ca_algorithm": {
          "name": "idx_ca_algorithm",
          "columns": [
            "key_algorithm"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "certificates": {
      "name": "certificates",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "ca_id": {
          "name": "ca_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "subject_dn": {
          "name": "subject_dn",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "serial_number": {
          "name": "serial_number",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "certificate_type": {
          "name": "certificate_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "not_before": {
          "name": "not_before",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "not_after": {
          "name": "not_after",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "certificate_pem": {
          "name": "certificate_pem",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "kms_key_id": {
          "name": "kms_key_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'active'"
        },
        "revocation_date": {
          "name": "revocation_date",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "revocation_reason": {
          "name": "revocation_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "san_dns": {
          "name": "san_dns",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "san_ip": {
          "name": "san_ip",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "san_email": {
          "name": "san_email",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "renewed_from_id": {
          "name": "renewed_from_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(unixepoch())"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(unixepoch())"
        }
      },
      "indexes": {
        "certificates_serial_number_unique": {
          "name": "certificates_serial_number_unique",
          "columns": [
            "serial_number"
          ],
          "isUnique": true
        },
        "idx_certificates_ca_id": {
          "name": "idx_certificates_ca_id",
          "columns": [
            "ca_id"
          ],
          "isUnique": false
        },
        "idx_certificates_status": {
          "name": "idx_certificates_status",
          "columns": [
            "status"
          ],
          "isUnique": false
        },
        "idx_certificates_serial": {
          "name": "idx_certificates_serial",
          "columns": [
            "serial_number"
          ],
          "isUnique": false
        },
        "idx_certificates_type": {
          "name": "idx_certificates_type",
          "columns": [
            "certificate_type"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "certificates_ca_id_certificate_authorities_id_fk": {
          "name": "certificates_ca_id_certificate_authorities_id_fk",
          "tableFrom": "certificates",
          "tableTo": "certificate_authorities",
          "columnsFrom": [
            "ca_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "certificates_renewed_from_id_certificates_id_fk": {
          "name": "certificates_renewed_from_id_certificates_id_fk",
          "tableFrom": "certificates",
          "tableTo": "certificates",
          "columnsFrom": [
            "renewed_from_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "crls": {
      "name": "crls",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "ca_id": {
          "name": "ca_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "crl_number": {
          "name": "crl_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "this_update": {
          "name": "this_update",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "next_update": {
          "name": "next_update",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "crl_pem": {
          "name": "crl_pem",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "revoked_count": {
          "name": "revoked_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(unixepoch())"
        }
      },
      "indexes": {
        "idx_crls_ca_id": {
          "name": "idx_crls_ca_id",
          "columns": [
            "ca_id"
          ],
          "isUnique": false
        },
        "idx_crls_number": {
          "name": "idx_crls_number",
          "columns": [
            "ca_id",
            "crl_number"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "crls_ca_id_certificate_authorities_id_fk": {
          "name": "crls_ca_id_certificate_authorities_id_fk",
          "tableFrom": "crls",
          "tableTo": "certificate_authorities",
          "columnsFrom": [
            "ca_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    }
  },
  "views": {},
  "enums": {},
  "_meta": {
    "schemas": {},
    "tables": {},
    "columns": {}
  },
  "internal": {
    "indexes": {}
  }
}